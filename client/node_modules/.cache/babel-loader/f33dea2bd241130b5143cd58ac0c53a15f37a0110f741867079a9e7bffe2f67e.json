{"ast":null,"code":"import _defineProperty from\"C:/VISILAB/Hans/HANS-Platform/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/VISILAB/Hans/HANS-Platform/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/VISILAB/Hans/HANS-Platform/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useRef,useState,useEffect}from\"react\";import Backdrop from'@mui/material/Backdrop';import Paper from'@mui/material/Paper';import Box from'@mui/material/Box';import Typography from'@mui/material/Typography';import SessionStatusView from'./StatusView';import QuestionDetails from'./QuestionDetails';import BoardView from'../BoardView';import{Session,SessionStatus}from'../../context/Session';import{QuestionStatus}from'../../context/Question';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function SessionView(_ref){var sessionId=_ref.sessionId,participantId=_ref.participantId,_ref$onLeave=_ref.onLeave,onLeave=_ref$onLeave===void 0?function(){}:_ref$onLeave;var sessionRef=useRef(null);var _useState=useState(SessionStatus.Joining),_useState2=_slicedToArray(_useState,2),sessionStatus=_useState2[0],setSessionStatus=_useState2[1];var _useState3=useState({status:QuestionStatus.Undefined}),_useState4=_slicedToArray(_useState3,2),question=_useState4[0],setQuestion=_useState4[1];var _useState5=useState({x:0,y:0,norm:[]}),_useState6=_slicedToArray(_useState5,2),userMagnetPosition=_useState6[0],setUserMagnetPosition=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),peerMagnetPositions=_useState8[0],setPeerMagnetPositions=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),centralCuePosition=_useState10[0],setCentralCuePosition=_useState10[1];useEffect(function(){fetch(\"/api/session/\".concat(sessionId),{method:'GET',headers:{'Accept':'application/json'}}).then(function(res){if(res.status===200){res.json().then(function(data){setSessionStatus(SessionStatus.Waiting);if(data.question_id){setQuestion({status:QuestionStatus.Loading,id:data.question_id});}});}else{res.text().then(function(msg){return console.log(msg);});}}).catch(function(error){console.log(error);});sessionRef.current=new Session(sessionId,participantId,function(controlMessage){switch(controlMessage.type){case'setup':{if(controlMessage.question_id===null){setQuestion({status:QuestionStatus.Undefined});}else{setQuestion({status:QuestionStatus.Loading,id:controlMessage.question_id});}break;}case'start':{setSessionStatus(SessionStatus.Active);break;}case'stop':{setSessionStatus(SessionStatus.Waiting);break;}default:break;}},function(participantId,updateMessage){setPeerMagnetPositions(function(peerPositions){return _objectSpread(_objectSpread({},peerPositions),{},_defineProperty({},participantId,updateMessage.data.position));});});},[sessionId,participantId]);useEffect(function(){var ignore=false;if(question.status===QuestionStatus.Loading){fetch(\"/api/question/\".concat(question.id),{method:'GET',headers:{'Accept':'application/json'}}).then(function(res){if(res.status===200){res.json().then(function(data){if(!ignore){setQuestion({status:QuestionStatus.Loaded,id:data.id,prompt:data.prompt,answers:data.answers,image:\"/api/question/\".concat(data.id,\"/image\")});sessionRef.current.publishControl({type:'ready'});}});}else{res.text().then(function(msg){return console.log(msg);});}}).catch(function(error){console.log(error);});}return function(){ignore=true;};},[question]);useEffect(function(){// Update central Cue based on magnet positions\nvar usablePeerPositions=Object.keys(peerMagnetPositions).map(function(k){return peerMagnetPositions[k];}).filter(function(peerPosition){return peerPosition.length===userMagnetPosition.norm.length;});setCentralCuePosition(usablePeerPositions.reduce(function(cuePosition,peerPosition){return cuePosition.map(function(value,i){return value+peerPosition[i];});},userMagnetPosition.norm).map(function(value){return value/(1+usablePeerPositions.length);}));},[userMagnetPosition,peerMagnetPositions]);// DEBUG-ONLY\n/*useEffect(() => {\r\n    // The component was drawn for the first time, configure a 1-second interval to simulate peer updates\r\n    const interval = setInterval(() => {\r\n      setPeerMagnetPositions(peerPositions => peerPositions.map(\r\n        peerPosition => \r\n          ((question.status === QuestionStatus.Loaded) && (peerPosition.length !== question.answers.length))\r\n          ? new Array(question.answers.length).fill(0).map(_ => Math.random())\r\n          : peerPosition.map(\r\n            value => Math.min(1.1, Math.max(0, value + (Math.random() - 0.5) * 0.1))\r\n          )\r\n      ));\r\n    }, 100);\r\n    return () => clearInterval(interval);\r\n  }, [question]);*/var onUserMagnetMove=function onUserMagnetMove(position){if(sessionStatus!==SessionStatus.Active)return;setUserMagnetPosition(position);sessionRef.current.publishUpdate({data:{position:position.norm}});};var onLeaveSessionClick=function onLeaveSessionClick(){// TODO: User should double-check the intention to logout (showing a modal when the leave/logout button is pressed)\n// TODO: The server should be notified about the user leaving the session:\n//sessionRef.current.leave()\nonLeave();};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Backdrop,{sx:{color:'#fff',zIndex:function zIndex(theme){return theme.zIndex.drawer+1;}},open:sessionStatus!==SessionStatus.Active,children:/*#__PURE__*/_jsx(SessionStatusView,{sessionId:sessionId,sessionStatus:sessionStatus,questionStatus:question.status,onLeaveClick:onLeaveSessionClick})}),/*#__PURE__*/_jsxs(Box,{component:\"main\",height:\"100vh\",sx:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(Paper,{component:\"header\",elevation:2,sx:{m:1,p:1,borderRadius:2},children:/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h4\",textAlign:\"center\",children:question.status===QuestionStatus.Loaded?question.prompt:\"Question not defined yet\"})}),/*#__PURE__*/_jsxs(Box,{sx:{flex:1,minHeight:0,gap:'10px',m:1,display:'flex',alignItems:'stretch'},children:[/*#__PURE__*/_jsx(Paper,{variant:\"outlined\",sx:{flex:1,/* grow: 1, shrink: 1, basis: 0*/alignSelf:'flex-start',bgcolor:'#EEEEEE',p:1},children:/*#__PURE__*/_jsx(QuestionDetails,{image:question.status===QuestionStatus.Loaded?question.image:\"\"})}),/*#__PURE__*/_jsx(Paper,{elevation:2,sx:{flex:2,// grow: 2, shrink: 2, basis: 0\nheight:'100%',p:1,display:'flex',flexDirection:'column'},children:/*#__PURE__*/_jsx(BoardView,{answers:question.status===QuestionStatus.Loaded?question.answers:[],centralCuePosition:centralCuePosition,peerMagnetPositions:Object.keys(peerMagnetPositions).map(function(k){return peerMagnetPositions[k];}),userMagnetPosition:userMagnetPosition,onUserMagnetMove:onUserMagnetMove})})]})]})]});}","map":{"version":3,"names":["React","useRef","useState","useEffect","Backdrop","Paper","Box","Typography","SessionStatusView","QuestionDetails","BoardView","Session","SessionStatus","QuestionStatus","SessionView","sessionId","participantId","onLeave","sessionRef","Joining","sessionStatus","setSessionStatus","status","Undefined","question","setQuestion","x","y","norm","userMagnetPosition","setUserMagnetPosition","peerMagnetPositions","setPeerMagnetPositions","centralCuePosition","setCentralCuePosition","fetch","method","headers","then","res","json","data","Waiting","question_id","Loading","id","text","msg","console","log","catch","error","current","controlMessage","type","Active","updateMessage","peerPositions","position","ignore","Loaded","prompt","answers","image","publishControl","usablePeerPositions","Object","keys","map","k","filter","peerPosition","length","reduce","cuePosition","value","i","onUserMagnetMove","publishUpdate","onLeaveSessionClick","color","zIndex","theme","drawer","display","flexDirection","m","p","borderRadius","flex","minHeight","gap","alignItems","alignSelf","bgcolor","height"],"sources":["C:/VISILAB/Hans/HANS-Platform/client/src/components/session/SessionView.jsx"],"sourcesContent":["import { React, useRef, useState, useEffect } from \"react\";\r\n\r\nimport Backdrop from '@mui/material/Backdrop';\r\n\r\nimport Paper from '@mui/material/Paper';\r\nimport Box from '@mui/material/Box';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nimport SessionStatusView from './StatusView';\r\nimport QuestionDetails from './QuestionDetails';\r\nimport BoardView from '../BoardView';\r\n\r\nimport { Session, SessionStatus } from '../../context/Session';\r\nimport { QuestionStatus } from '../../context/Question';\r\n\r\n\r\nexport default function SessionView({ sessionId, participantId, onLeave=()=>{} }) {\r\n  const sessionRef = useRef(null);\r\n  const [sessionStatus, setSessionStatus] = useState(SessionStatus.Joining);\r\n  const [question, setQuestion] = useState({status: QuestionStatus.Undefined});\r\n  const [userMagnetPosition, setUserMagnetPosition] = useState({x: 0, y: 0, norm: []});\r\n  const [peerMagnetPositions, setPeerMagnetPositions] = useState({});\r\n  const [centralCuePosition, setCentralCuePosition] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetch(\r\n      `/api/session/${sessionId}`,\r\n      {\r\n        method: 'GET',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n        },\r\n      }\r\n    ).then(res => {\r\n      if(res.status === 200) {\r\n        res.json().then(data => {\r\n          setSessionStatus(SessionStatus.Waiting);\r\n          if(data.question_id) {\r\n            setQuestion({status: QuestionStatus.Loading, id: data.question_id});\r\n          }\r\n        });\r\n      } else {\r\n        res.text().then(msg => console.log(msg));\r\n      }\r\n    }).catch(error => {\r\n      console.log(error);\r\n    });\r\n\r\n    sessionRef.current = new Session(sessionId, participantId,\r\n      (controlMessage) => {\r\n        switch(controlMessage.type) {\r\n          case 'setup': {\r\n            if(controlMessage.question_id === null) {\r\n              setQuestion({status: QuestionStatus.Undefined});\r\n            } else {\r\n              setQuestion({\r\n                status: QuestionStatus.Loading,\r\n                id: controlMessage.question_id\r\n              });\r\n            }\r\n            break;\r\n          }\r\n          case 'start': {\r\n            setSessionStatus(SessionStatus.Active);\r\n            break;\r\n          }\r\n          case 'stop': {\r\n            setSessionStatus(SessionStatus.Waiting);\r\n            break;\r\n          }\r\n          default: break;\r\n        }\r\n      },\r\n      (participantId, updateMessage) => {\r\n        setPeerMagnetPositions((peerPositions) => {\r\n          return {\r\n            ...peerPositions,\r\n            [participantId]: updateMessage.data.position\r\n          }\r\n        });\r\n      });\r\n  }, [sessionId, participantId]);\r\n\r\n  useEffect(() => {\r\n    let ignore = false;\r\n    if(question.status === QuestionStatus.Loading) {\r\n      fetch(\r\n        `/api/question/${question.id}`,\r\n        {\r\n          method: 'GET',\r\n          headers: {\r\n            'Accept': 'application/json',\r\n          },\r\n        }\r\n      ).then(res => {\r\n        if(res.status === 200) {\r\n          res.json().then(data => {\r\n            if(!ignore) {\r\n              setQuestion({\r\n                status: QuestionStatus.Loaded,\r\n                id: data.id,\r\n                prompt: data.prompt,\r\n                answers: data.answers,\r\n                image: `/api/question/${data.id}/image`\r\n              });\r\n              sessionRef.current.publishControl({type: 'ready'});\r\n            }\r\n          });\r\n        } else {\r\n          res.text().then(msg => console.log(msg));\r\n        }\r\n      }).catch(error => {\r\n        console.log(error);\r\n      });\r\n    }\r\n    return () => { ignore = true };\r\n  }, [question]);\r\n\r\n  useEffect(() => {\r\n    // Update central Cue based on magnet positions\r\n    const usablePeerPositions = Object.keys(peerMagnetPositions).map(\r\n      k => peerMagnetPositions[k]\r\n    ).filter(peerPosition => peerPosition.length === userMagnetPosition.norm.length);\r\n    setCentralCuePosition(\r\n      usablePeerPositions.reduce(\r\n        (cuePosition, peerPosition) => cuePosition.map(\r\n          (value, i) => value + peerPosition[i]\r\n        ),\r\n        userMagnetPosition.norm\r\n      ).map(value => value / (1 + usablePeerPositions.length))\r\n    );\r\n  }, [userMagnetPosition, peerMagnetPositions])\r\n\r\n  // DEBUG-ONLY\r\n  /*useEffect(() => {\r\n    // The component was drawn for the first time, configure a 1-second interval to simulate peer updates\r\n    const interval = setInterval(() => {\r\n      setPeerMagnetPositions(peerPositions => peerPositions.map(\r\n        peerPosition => \r\n          ((question.status === QuestionStatus.Loaded) && (peerPosition.length !== question.answers.length))\r\n          ? new Array(question.answers.length).fill(0).map(_ => Math.random())\r\n          : peerPosition.map(\r\n            value => Math.min(1.1, Math.max(0, value + (Math.random() - 0.5) * 0.1))\r\n          )\r\n      ));\r\n    }, 100);\r\n    return () => clearInterval(interval);\r\n  }, [question]);*/\r\n\r\n  const onUserMagnetMove = (position) => {\r\n    if(sessionStatus !== SessionStatus.Active) return;\r\n\r\n    setUserMagnetPosition(position);\r\n    sessionRef.current.publishUpdate({data: {position: position.norm}});\r\n  };\r\n\r\n  const onLeaveSessionClick = () => {\r\n    // TODO: User should double-check the intention to logout (showing a modal when the leave/logout button is pressed)\r\n\r\n    // TODO: The server should be notified about the user leaving the session:\r\n    //sessionRef.current.leave()\r\n\r\n    onLeave();\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Backdrop\r\n        sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\r\n        open={sessionStatus !== SessionStatus.Active}\r\n      >\r\n        <SessionStatusView\r\n          sessionId={sessionId}\r\n          sessionStatus={sessionStatus}\r\n          questionStatus={question.status}\r\n          onLeaveClick={onLeaveSessionClick}\r\n        />\r\n      </Backdrop>\r\n      <Box\r\n        component=\"main\"\r\n        height='100vh'\r\n        sx={{\r\n          display:'flex',\r\n          flexDirection: 'column',\r\n        }}\r\n      >\r\n        <Paper\r\n          component=\"header\"\r\n          elevation={2}\r\n          sx={{\r\n            m: 1,\r\n            p: 1,\r\n            borderRadius: 2\r\n          }}\r\n        >\r\n          <Typography component=\"h1\" variant=\"h4\" textAlign='center'>\r\n            {question.status === QuestionStatus.Loaded ? question.prompt : \"Question not defined yet\"}\r\n          </Typography>\r\n        </Paper>\r\n        <Box\r\n          sx={{\r\n            flex: 1,\r\n            minHeight: 0,\r\n            gap: '10px',\r\n            m: 1,\r\n            display: 'flex',\r\n            alignItems: 'stretch',\r\n          }}\r\n        >\r\n          <Paper\r\n            variant=\"outlined\"\r\n            sx={{\r\n              flex: 1, /* grow: 1, shrink: 1, basis: 0*/\r\n              alignSelf: 'flex-start',\r\n              bgcolor: '#EEEEEE',\r\n              p: 1,\r\n            }}\r\n          >\r\n          <QuestionDetails\r\n            image={question.status === QuestionStatus.Loaded ? question.image : \"\"}\r\n          />\r\n          </Paper>\r\n          <Paper\r\n            elevation={2}\r\n            sx={{\r\n              flex: 2, // grow: 2, shrink: 2, basis: 0\r\n              height: '100%',\r\n              p: 1,\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n            }}\r\n          >\r\n          <BoardView\r\n            answers={question.status === QuestionStatus.Loaded ? question.answers : []}\r\n            centralCuePosition={centralCuePosition}\r\n            peerMagnetPositions={Object.keys(peerMagnetPositions).map(\r\n              k => peerMagnetPositions[k]\r\n            )}\r\n            userMagnetPosition={userMagnetPosition}\r\n            onUserMagnetMove={onUserMagnetMove}\r\n          />\r\n          </Paper>\r\n        </Box>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}